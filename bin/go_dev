#!/bin/bash

if [[ "$(docker images -q go_dev 2> /dev/null)" == "" ]]; then
  echo "Go development image is not present. Creating..."
  docker create --name go_dev_volumes \
    -v /go -v "$(PWD)":/go/src/app \
    golang:1.7
  docker build -t go_dev .
  docker run -it --name go_dev \
    --volumes-from go_dev_volumes \
    -p 8080:8080/tcp \
    go_dev
else
  docker start -i go_dev
fi


